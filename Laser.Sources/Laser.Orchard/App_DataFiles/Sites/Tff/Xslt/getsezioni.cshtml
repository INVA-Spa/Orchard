

@{
	XmlDocument mydoc=ToXmlDocument(Model);
	foreach(XmlNode bookToModify in mydoc.SelectNodes(".//image/url_resource")){
		bookToModify.InnerXml="http://www.torinofilmfest.org/public/uploaded/"+bookToModify.InnerXml;
	}
//		foreach(XmlNode bookToModify in mydoc.SelectNodes(".//allegati/url_resource")){
//		bookToModify.InnerXml="http://www.torinofilmfest.org/public/uploaded/"+bookToModify.InnerXml;
//	}
	mydoc=aggiungipadre(mydoc,"root","_dataList","_data");

	mydoc=RimuoviFratelli(mydoc,"root/_dataList");
	mydoc=rendinumeric(mydoc,"root/_dataList/_data/parentID");
	mydoc=generaOriginalId(mydoc,"root/_dataList/_data/id");
	mydoc=rendinumeric(mydoc,"root/_dataList/_data/edizioneID");
	mydoc=generaid(mydoc,"root/_dataList/_data/id",4000000);
//	mydoc=cambianome(mydoc,"root/_dataList/_data/abstract","AbstractText");
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/ordine");
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/priority");
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/image/ID_media");
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/image/ID_article");
	mydoc=aggiungipadre(mydoc,"root/_dataList/_data/media","ImageList","image");
//	
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/video/ID_video");
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/video/ID_article");
//	mydoc=aggiungipadre(mydoc,"root/_dataList/_data/media","VideoList","video");
	
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/allegati/id");
//	mydoc=cambianome(mydoc,"root/_dataList/_data/media/allegati/id","idallegato");
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/allegati/id_join");
//	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/allegati/ordine");
//	mydoc=aggiungipadre(mydoc,"root/_dataList/_data/media","AllegatiList","allegati");
	
	mydoc=CreaContatore(mydoc,"root/_dataList/_data","OrdinamentoLaser");
	mydoc=textreplace(mydoc,"root/_dataList/_data/sezione_descrizione","\u2028","");
	mydoc=aggiungifiglio(mydoc,"root/_dataList","_data"); // rende vettore
		
	mydoc=aggiungifiglio(mydoc,"root/_dataList/_data/media/ImageList","image");// rende vettore
//	mydoc=aggiungifiglio(mydoc,"root/_dataList/_data/media/VideoList","video");// rende vettore
//	mydoc=aggiungifiglio(mydoc,"root/_dataList/_data/media/AllegatiList","allegati");// rende vettore
//	mydoc=RimuoviNodo(mydoc,"root/_dataList/_data/media");
	mydoc=cambianome(mydoc,"root/_dataList/_data/media/ImageList/image","Dataimage");
	mydoc=cambianome(mydoc,"root/_dataList/_data","DataSezioni");
	mydoc=cambianome(mydoc,"root/_dataList","ToRemove");

	SpanXDocument(ToXDocument(mydoc).Root);
}
