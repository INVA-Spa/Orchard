@model Laser.Orchard.Translator.ViewModels.TranslationDetailViewModel

@{
    Style.Require("MediaManagerAdmin");
    Style.Require("Laser.Orchard.Translator");
    Style.Require("FontAwesome");

    Layout.Title = T("Translator").ToString();
}

<div id="media-library">
    <div id="media-library-toolbar">
        @{
            if (!string.IsNullOrWhiteSpace(Model.containerName))
            {
                <span id="folder-name">@Model.containerName</span>
                <span id="language">@Model.language</span>
                <input id="folderSettingsButton" class="button" value="@T("Settings")" />
            }
        }
    </div>
    <div id="media-library-main">
        <div id="media-library-main-navigation">
            <ul>
                <li id="media-library-main-navigation-tree">
                    <ul>
                        @foreach (var messageData in Model.messages)
                        {
                            <li>
                                <div class="media-library-folder">
                                    <div id="message-@messageData.id" class="media-library-folder-title">
                                        @if (messageData.localized)
                                        { <i class="fa fa-check"></i> }
                                        else
                                        { <i class="fa fa-times"></i> }
                                        <span data-id="@messageData.id">@messageData.message</span>
                                    </div>
                                </div>
                            </li>
                        }
                    </ul>
                </li>
            </ul>
        </div>
        <div id="media-library-main-list-wrapper">
            <div id="media-library-main-list">
                <iframe id="translatorFormFrame" style="width:100%; height:80%;" src="@Url.Action("TranslatorFolderSettings", "Translator", new { folderName = Model.containerName, folderType = Model.containerType, language = Model.language })"></iframe>
            </div>
        </div>
    </div>
</div>
<div id="media-library-bottom-toolbar">
    <a class="button" href="@Url.Action("Index", "TranslatorTree", new { selectedCulture = Model.language,
                                                                         selectedFolderName = Model.containerName,
                                                                         selectedFolderType = Model.containerType })">
        @T("Back")
    </a>
</div>

@{
    using (Script.Foot())
    {
    <script type="text/javascript">
        $(function () {
            $('.media-library-folder-title').click(function () {
                $('.selected').removeClass('selected');
                $(this).addClass('selected');

                var iFrameUrl = '@Url.Action("TranslatorForm", "Translator", new { id = "idPlaceholder" })';
                iFrameUrl = iFrameUrl.replace("idPlaceholder", $(this).find("span").attr("data-id"));
                $('#translatorFormFrame').attr('src', iFrameUrl);
            });

            $('#folderSettingsButton').click(function () {
                var iFrameUrl = '@Html.Raw(Url.Action("TranslatorFolderSettings", "Translator", new { language = Model.language, folderName = Model.containerName, folderType = Model.containerType }))';
                $('#translatorFormFrame').attr('src', iFrameUrl);
            });
        });
    </script>
    }
}