@{
	XmlDocument mydoc=ToXmlDocument(Model);
	foreach(XmlNode bookToModify in mydoc.SelectNodes(".//image/url_resource")){
		bookToModify.InnerXml="http://www.torinofilmfest.org/public/uploaded/"+bookToModify.InnerXml;
	}
	foreach(XmlNode bookToModify in mydoc.SelectNodes(".//allegati/url_resource")){
		bookToModify.InnerXml="http://www.torinofilmfest.org/public/uploaded/"+bookToModify.InnerXml;
	}
	mydoc=aggiungipadre(mydoc,"root","_dataList","_data");

	mydoc=RimuoviFratelli(mydoc,"root/_dataList");
	mydoc=rendinumeric(mydoc,"root/_dataList/_data/parentID");
		mydoc=aggiungifiglio(mydoc,"root/_dataList/_data","Sid");
	foreach(XmlNode bookToModify in mydoc.SelectNodes("/root/_dataList/_data")){
		bookToModify.SelectSingleNode("Sid").InnerXml="DataNews:"+bookToModify.SelectSingleNode("id").InnerXml;
	}
	mydoc=generaOriginalId(mydoc,"root/_dataList/_data/id");
	mydoc=generaid(mydoc,"root/_dataList/_data/id",1000000);

	//mydoc=rendinumeric(mydoc,"root/_dataList/_data/id");
	//mydoc=cambianome(mydoc,"root/_dataList/_data/id","OriginalId");
	mydoc=textreplace(mydoc,"root/_dataList/_data/abstract","\u2028","");
	mydoc=cambianome(mydoc,"root/_dataList/_data/abstract","AbstractText");
	mydoc=rendinumeric(mydoc,"root/_dataList/_data/ordine");
	
	mydoc=generaOriginalId(mydoc,"root/_dataList/_data/media/image/ID_media");
	mydoc=generaid(mydoc,"root/_dataList/_data/media/image/ID_media",10000000);

	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/image/ID_article");
	mydoc=aggiungipadre(mydoc,"root/_dataList/_data/media","ImageList","image");
	
	mydoc=generaOriginalId(mydoc,"root/_dataList/_data/media/video/ID_video");
	mydoc=generaid(mydoc,"root/_dataList/_data/media/video/ID_video",20000000);
	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/video/ID_article");
	mydoc=aggiungipadre(mydoc,"root/_dataList/_data/media","VideoList","video");
	
	mydoc=generaOriginalId(mydoc,"root/_dataList/_data/media/allegati/id");
	mydoc=generaid(mydoc,"root/_dataList/_data/media/allegati/id",30000000);
	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/allegati/id_join");
	mydoc=rendinumeric(mydoc,"root/_dataList/_data/media/allegati/ordine");
	mydoc=aggiungipadre(mydoc,"root/_dataList/_data/media","AllegatiList","allegati");
	
	mydoc=CreaContatore(mydoc,"root/_dataList/_data","OrdinamentoLaser");

	mydoc=textreplace(mydoc,"root/_dataList/_data/body","\u2028","");
	mydoc=aggiungifiglio(mydoc,"root/_dataList","_data"); // rende vettore
	mydoc=aggiungifiglio(mydoc,"root/_dataList/_data/media/ImageList","image");// rende vettore
	mydoc=cambianome(mydoc,"root/_dataList/_data/media/ImageList/image","Dataimage");

	mydoc=aggiungifiglio(mydoc,"root/_dataList/_data/media/VideoList","video");// rende vettore
	mydoc=aggiungifiglio(mydoc,"root/_dataList/_data/media/AllegatiList","allegati");// rende vettore
	mydoc=cambianome(mydoc,"root/_dataList/_data/media/AllegatiList/allegati","Allegati");
	mydoc=RimuoviNodo(mydoc,"root/_dataList/_data/media");
	mydoc=cambianome(mydoc,"root/_dataList/_data","DataNews");
	mydoc=cambianome(mydoc,"root/_dataList","ToRemove");

	SpanXDocument(ToXDocument(mydoc).Root);
}
