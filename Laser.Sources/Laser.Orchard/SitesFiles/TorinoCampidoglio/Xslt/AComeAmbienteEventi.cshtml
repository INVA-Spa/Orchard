@{
	XmlDocument mydoc=ToXmlDocument(Model);

    mydoc = aggiungipadre(mydoc, "root", "ExternalEvents", "posts");
    mydoc = RimuoviFratelli(mydoc, "root/ExternalEvents");

    mydoc = cambianome(mydoc, "root/ExternalEvents/posts", "ExternalEvent");
	
	mydoc = cambianome(mydoc, "/title", "TitleText");
    mydoc = cambianome(mydoc, "/url", "LinkText");
    mydoc = cambianome(mydoc, "/content", "DescriptionText");
    mydoc = cambianome(mydoc, "/excerpt", "ExcerptText");
    mydoc = cambianome(mydoc, "root/ExternalEvents/ExternalEvent/thumbnail", "ImageUrl");
	
	mydoc = ConvertDateWithFormat(mydoc, "/date");
	mydoc = ConvertDateWithFormat(mydoc, "/modified");
	
	foreach(XmlNode child_to_remove in mydoc.SelectNodes("/root/ExternalEvents/ExternalEvent/tags")){
		child_to_remove.ParentNode.RemoveChild(child_to_remove);
	}
	
	foreach(XmlNode child_to_remove in mydoc.SelectNodes("/root/ExternalEvents/ExternalEvent/categories")){
		child_to_remove.ParentNode.RemoveChild(child_to_remove);
	}
	
	foreach(XmlNode child_to_remove in mydoc.SelectNodes("/root/ExternalEvents/ExternalEvent/custom_fields")){
		child_to_remove.ParentNode.RemoveChild(child_to_remove);
	}
	
	foreach(XmlNode child_to_remove in mydoc.SelectNodes("/root/ExternalEvents/ExternalEvent/author")){
		child_to_remove.ParentNode.RemoveChild(child_to_remove);
	}
	
	foreach(XmlNode child_to_remove in mydoc.SelectNodes("/root/ExternalEvents/ExternalEvent/comment_count")){
		child_to_remove.ParentNode.RemoveChild(child_to_remove);
	}
	
	foreach(XmlNode child_to_remove in mydoc.SelectNodes("/root/ExternalEvents/ExternalEvent/comment_status")){
		child_to_remove.ParentNode.RemoveChild(child_to_remove);
	}
	
	foreach(XmlNode child_to_remove in mydoc.SelectNodes("/root/ExternalEvents/ExternalEvent/comments")){
		child_to_remove.ParentNode.RemoveChild(child_to_remove);
	}

    mydoc = aggiungipadre(mydoc, "root/ExternalEvents/ExternalEvent", "Attachments", "attachments");
    mydoc = cambianome(mydoc, "root/ExternalEvents/ExternalEvent/Attachments/attachments", "Attachment");
	
    mydoc = aggiungipadre(mydoc, "root/ExternalEvents/ExternalEvent", "ThumbnailImages", "thumbnail_images");
    mydoc = cambianome(mydoc, "root/ExternalEvents/ExternalEvent/ThumbnailImages/thumbnail_images", "ThumbnailImage");

    mydoc = cambianome(mydoc, "/ExternalEvents/ExternalEvent/id", "Sid");
    foreach (XmlNode child_node in mydoc.SelectNodes("//ExternalEvents/ExternalEvent/Sid")) {
        child_node.InnerText = "ExternalEvent:" + child_node.InnerText;
    }

    mydoc = cambianome(mydoc, "/ExternalEvents/ExternalEvent/Attachments/Attachment/id", "Sid");
    foreach (XmlNode child_node in mydoc.SelectNodes("//ExternalEvents/ExternalEvent/Attachments/Attachment/Sid")) {
        child_node.InnerText = "Attachment:" + child_node.InnerText;
    }
	
	foreach (XmlNode child_node in mydoc.SelectNodes("//ExternalEvents/ExternalEvent")) {
        mydoc = AggiungiShareLink(mydoc, child_node, child_node["TitleText"].InnerText, child_node["LinkText"].InnerText, child_node["ImageUrl"].InnerText);
    }
	
	mydoc = RimuoviFratelliMultiplo(mydoc, "root/ExternalEvents/ExternalEvent/Attachments/Attachment/images/full");
	mydoc = RimuoviFratelliMultiplo(mydoc, "root/ExternalEvents/ExternalEvent/ThumbnailImages/ThumbnailImage/full");
	
	mydoc = cambianome(mydoc, "root/ExternalEvents", "ToRemove");
	
	SpanXDocument(ToXDocument(mydoc).Root);
}				