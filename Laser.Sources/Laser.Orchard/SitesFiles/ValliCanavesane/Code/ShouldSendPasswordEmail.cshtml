@using Orchard;
@using Orchard.Security;
@using Orchard.ContentManagement;
@using Orchard.ContentManagement.Records;
@using Orchard.Data;
@using System.Linq;
@{
    string retString = "Error"; //possible outcomes: "Error","SendMailUser", "DontSend"
    Orchard.Workflows.Models.WorkflowContext wfContext = null;
}
@{
    try {
        wfContext = Model.Tokens["Workflow"];
        if (Model.OrchardServices.WorkContext.HttpContext.Request.Form["Password"] != null) {
            retString = "SendMailUser";
        } else {
            retString = ("DontSend");
        }
    } catch (Exception ex) {
        wfContext.SetState("ErrorMessage", ex.Message);
    }
}
@retString