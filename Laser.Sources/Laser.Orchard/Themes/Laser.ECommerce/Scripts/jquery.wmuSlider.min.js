/*!
 * jQuery wmuSlider v2.1
 * 
 * Copyright (c) 2011 Brice Lechatellier
 * http://brice.lechatellier.com/
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
(function(n){n.fn.wmuSlider=function(t){var t=n.extend({animation:"fade",animationDuration:600,slideshow:!0,slideshowSpeed:7e3,slideToStart:0,navigationControl:!0,paginationControl:!0,previousText:"Previous",nextText:"Next",touch:!1,slide:"article",items:1},t);return this.each(function(){var i=n(this),r=t.slideToStart,u=i.find(".wmuSliderWrapper"),f=i.find(t.slide),e=f.length,c,s,h,o=function(o,c,l){if(h)return!1;h=!0;r=o;var a=n(f[o]);i.animate({height:a.innerHeight()});t.animation=="fade"?(f.css({position:"absolute",opacity:0}),a.css("position","relative"),a.animate({opacity:1},t.animationDuration,function(){h=!1})):t.animation=="slide"&&(c?o==0?u.animate({marginLeft:-i.width()/t.items*e},t.animationDuration,function(){u.css("marginLeft",0);h=!1}):(l||u.css("marginLeft",-i.width()/t.items*e),u.animate({marginLeft:-i.width()/t.items*o},t.animationDuration,function(){h=!1})):u.animate({marginLeft:-i.width()/t.items*o},t.animationDuration,function(){h=!1}));s&&s.find("a").each(function(t){t==o?n(this).addClass("wmuActive"):n(this).removeClass("wmuActive")});i.trigger("slideLoaded",o)},l,a,v,y;t.paginationControl&&(s=n('<ul class="wmuSliderPagination"><\/ul>'),n.each(f,function(n){s.append('<li><a href="#">'+n+"<\/a><\/li>");s.find("a:eq("+n+")").click(function(t){t.preventDefault();clearTimeout(c);o(n)})}),i.append(s));t.slideshow&&(l=function(){r+1<e?o(r+1):o(0,!0);c=setTimeout(l,t.slideshowSpeed)},c=setTimeout(l,t.slideshowSpeed));a=function(){var e=n(f[r]);i.animate({height:e.innerHeight()});t.animation=="slide"&&(f.css({width:i.width()/t.items}),u.css({marginLeft:-i.width()/t.items*r,width:i.width()*f.length}))};v=function(n,f,s,h){clearTimeout(c);f=="move"&&(s=="left"||s=="right")?s=="right"?r==0?u.css("marginLeft",-e*i.width()/t.items+h):u.css("marginLeft",-r*i.width()/t.items+h):s=="left"&&u.css("marginLeft",-r*i.width()/t.items-h):f=="cancel"?s=="right"&&r==0?u.animate({marginLeft:-e*i.width()/t.items},t.animationDuration):u.animate({marginLeft:-r*i.width()/t.items},t.animationDuration):f=="end"&&(s=="right"?r==0?o(e-1,!0,!0):o(r-1):s=="left"?r+1==e?o(0,!0):o(r+1):u.animate({marginLeft:-r*i.width()/t.items},t.animationDuration))};t.touch&&t.animation=="slide"&&(n.isFunction(n.fn.swipe)||n.ajax({url:"jquery.touchSwipe.min.js",async:!1}),n.isFunction(n.fn.swipe)&&i.swipe({triggerOnTouchEnd:!1,swipeStatus:v,allowPageScroll:"vertical"}));y=function(){var h=n(f[r]),c=h.find("img"),s;if(c.load(function(){u.show();i.animate({height:h.innerHeight()})}),t.animation=="fade")f.css({position:"absolute",width:"100%",opacity:0}),n(f[r]).css("position","relative");else if(t.animation=="slide"){for(t.items>e&&(t.items=e),f.css("float","left"),f.each(function(t){var i=n(this);i.attr("data-index",t)}),s=0;s<t.items;s++)u.append(n(f[s]).clone());f=i.find(t.slide)}a();i.trigger("hasLoaded");o(r)};y();n(window).resize(a);i.bind("loadSlide",function(n,t){clearTimeout(c);o(t)})})}})(jQuery);