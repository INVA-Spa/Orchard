@{
    var Menu = Model.Menu;
    var items = (IList<dynamic>)Enumerable.Cast<dynamic>(Menu.Items);

    int position = 0;
    var linkHome = items[0].Href;

    string modalitaMenu = Model.ContentItem.MenuWidgetPart.MenuWidget.Modalita.Value;
}

@if (modalitaMenu == "Navigazione") {
    <div class="menu-menu-principale-container">
        <ul id="main-menu-home" class="nav navbar-nav handel-got-d hidden-xs" data-top="842">

            @foreach (var item in items) {
                if (position > 0) {
                    bool hasChildren = (item.Item.Items.Length > 0);
                        
                <li class="menu-item @((hasChildren) ? "dropdown" : "")">

                    @if (hasChildren) {
                        <a href="@item.Href" class="dropdown-toggle" data-toggle="dropdown">@item.Text<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            @DisplayChildren(item)
                        </ul>
                    } else {
                        <a href="@item.Href">@item.Text</a>
                    }
                </li>
                }

                position = position + 1;
            }
        </ul>
    </div>
} 
else if (modalitaMenu == "Filtro") {
    <div class="overflow-hidden">
        <div id="filter" class="clearfix">
            <a class="filter-label handel-got-d" href="#">Filter<i class="fa fa-angle-down"></i></a>
            <ul class="nav">
                @foreach (var item in items) {
                    if (item.Text.Text == "Tutti") {
                        <li><a href="~/showcase">@item.Text</a></li>
                    } 
                    else {
                        <li><a href="~/showcase?termids=@item.Content.Id">@item.Text</a></li>
                    }
                }
            </ul>
        </div>
    </div>
}